#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ•µï¸  Let's check that code quality";

# Check tsconfig standards
npm run check-types ||
(
  echo "âŒ ğŸ¤¢ TS types check failed - Run npm run check-types, add changes and try commiting again";
  false;
)

# Check Prettier Standards
npm run check-format ||
(
  echo "âŒ ğŸ¤¢ Prettier check failed - Run npm run format, add changes and try commiting again";
  false;
)

# Check ESLint Standards
npm run check-lint ||
(
  echo "âŒ ğŸ¤¢ ESLint check failed - Make the changes proposed above, add changes and try again";
  false;
)

# All checks passed
echo "ğŸ˜ Code is looking good. Let's try to build ğŸ› ï¸";

# Testing
npm run test ||
(
  echo "âŒ ğŸ¤¢ App test failed - Fix errors above, and try again";
  false;
)

# Building
npm run build ||
(
  echo "âŒ ğŸ¤¢ Next build failed - Fix errors above, add changes and try again";
  false;
)

# Ready to commit
echo "âœ… ğŸ‘©â€ğŸš€ Mision control, code is ready to ğŸš€ push to commit"
